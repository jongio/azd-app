import{S as u,d as p}from"./tour-steps.AsGCdvT0.js";function m(){try{const r=localStorage.getItem(u);if(!r)return{...p};const e=JSON.parse(r);return e.version===1?e:{...p}}catch{return{...p}}}function g(r){try{localStorage.setItem(u,JSON.stringify({...r,lastUpdated:new Date().toISOString()}))}catch(e){console.error("Failed to save tour progress:",e)}}function i(){document.querySelectorAll("[data-completion-checkbox]").forEach(e=>{const o=parseInt(e.getAttribute("data-step-number")||"0",10),c=e.querySelector("[data-completion-input]"),n=e.querySelector("[data-completion-text]");if(!c||!o)return;const a=m().completedSteps.includes(o);c.checked=a,e.classList.toggle("completion-checkbox--completed",a),n&&(n.textContent=a?"Completed! Great job.":"Mark as complete"),c.addEventListener("change",()=>{const t=m(),l=c.checked;l?t.completedSteps.includes(o)||(t.completedSteps.push(o),t.completedSteps.sort((d,S)=>d-S)):t.completedSteps=t.completedSteps.filter(d=>d!==o),g(t),e.classList.toggle("completion-checkbox--completed",l),n&&(n.textContent=l?"Completed! Great job.":"Mark as complete"),window.dispatchEvent(new CustomEvent("tour:progress-updated",{detail:{completedSteps:t.completedSteps}}));const s=document.createElement("div");s.setAttribute("role","status"),s.setAttribute("aria-live","polite"),s.className="sr-only",s.textContent=l?`Step ${o} marked as complete. Progress: ${t.completedSteps.length} of 8 steps.`:`Step ${o} marked as incomplete.`,document.body.appendChild(s),setTimeout(()=>s.remove(),1e3)})})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i();document.addEventListener("astro:after-swap",i);
