# yaml-language-server: $schema=https://raw.githubusercontent.com/jongio/azd-app/main/schemas/v1.1/azure.yaml.json

name: fullstack-test
metadata:
  template: fullstack-test

hooks:
  prerun:
    shell: sh
    run: echo "ðŸš€ Starting fullstack application - preparing API and Web services..."
    continueOnError: false
  postrun:
    shell: sh
    run: echo "âœ… Fullstack application is running! API on port 5000 and Web on port 5001"

reqs:
  - name: node
    minVersion: 18.0.0
  - name: npm
    minVersion: 9.0.0
  - name: python
    minVersion: 3.9.0
  - name: pip
    minVersion: "20.0.0"

services:
  api:
    language: python
    project: ./api
    host: localhost
    ports:
      - "5000"
    # Docker Compose map format (recommended)
    environment:
      FLASK_ENV: development
      FLASK_APP: app.py
  
  web:
    language: js
    project: ./web
    host: localhost
    ports:
      - "5001"
    # Docker Compose array of strings format
    environment:
      - NODE_ENV=development
      - API_URL=http://localhost:5000
