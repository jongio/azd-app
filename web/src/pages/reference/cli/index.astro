---
import Layout from '../../../components/Layout.astro';
import { Code } from 'astro-expressive-code/components';

const quickRefCode = `# Check prerequisites
azd app reqs

# Install dependencies
azd app deps

# Start development environment
azd app run

# Monitor service health
azd app health --stream

# View logs
azd app logs --follow

# Show running services
azd app info

# Start MCP server for AI debugging
azd app mcp serve`;
---

<Layout title="CLI Reference" description="Complete reference for all azd app commands and flags">
  <div class="max-w-6xl mx-auto px-4 py-12">
    <!-- Header -->
    <div class="mb-12">
      <h1 class="text-4xl font-bold mb-4">CLI Reference</h1>
      <p class="text-xl text-neutral-600 dark:text-neutral-400">
        Complete reference for all <code class="px-2 py-1 bg-neutral-100 dark:bg-neutral-800 rounded">azd app</code> commands and flags.
      </p>
    </div>

    <!-- Global Flags -->
    <section class="mb-12">
      <h2 class="text-2xl font-bold mb-6">Global Flags</h2>
      <p class="text-neutral-600 dark:text-neutral-400 mb-4">
        These flags are available for all commands:
      </p>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm bg-neutral-50 dark:bg-neutral-800 rounded-lg overflow-hidden">
          <thead>
            <tr class="bg-neutral-100 dark:bg-neutral-900">
              <th class="text-left py-3 px-4 font-semibold text-neutral-900 dark:text-neutral-100">Flag</th>
              <th class="text-left py-3 px-4 font-semibold text-neutral-900 dark:text-neutral-100">Short</th>
              <th class="text-left py-3 px-4 font-semibold text-neutral-900 dark:text-neutral-100">Description</th>
            </tr>
          </thead>
          <tbody class="text-neutral-700 dark:text-neutral-300">
            <tr class="border-t border-neutral-200 dark:border-neutral-700">
              <td class="py-3 px-4"><code class="text-blue-600 dark:text-blue-400">--output</code></td>
              <td class="py-3 px-4"><code class="text-neutral-800 dark:text-neutral-200">-o</code></td>
              <td class="py-3 px-4">Output format (default, json)</td>
            </tr>
            <tr class="border-t border-neutral-200 dark:border-neutral-700">
              <td class="py-3 px-4"><code class="text-blue-600 dark:text-blue-400">--debug</code></td>
              <td class="py-3 px-4 text-neutral-500 dark:text-neutral-400">-</td>
              <td class="py-3 px-4">Enable debug logging</td>
            </tr>
            <tr class="border-t border-neutral-200 dark:border-neutral-700">
              <td class="py-3 px-4"><code class="text-blue-600 dark:text-blue-400">--structured-logs</code></td>
              <td class="py-3 px-4 text-neutral-500 dark:text-neutral-400">-</td>
              <td class="py-3 px-4">Enable structured JSON logging to stderr</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Commands -->
    <section>
      <h2 class="text-2xl font-bold mb-6">Commands</h2>
      <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
        
    <a href="/azd-app/reference/cli/reqs/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app reqs</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Verifies that all required tools are installed and optionally checks if they are running. Can also auto-generate requirements from your project.</p>
      <div class="mt-4 text-sm text-neutral-500">
        5 flags â€¢ 6 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/deps/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app deps</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Automatically detects your project type and installs all dependencies.</p>
      <div class="mt-4 text-sm text-neutral-500">
        4 flags â€¢ 5 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/run/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app run</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Starts your development environment based on project type with support for multi-service orchestration.</p>
      <div class="mt-4 text-sm text-neutral-500">
        6 flags â€¢ 8 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/start/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app start</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Start stopped services.</p>
      <div class="mt-4 text-sm text-neutral-500">
        2 flags â€¢ 4 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/stop/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app stop</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Stop running services.</p>
      <div class="mt-4 text-sm text-neutral-500">
        2 flags â€¢ 4 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/restart/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app restart</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Restart services.</p>
      <div class="mt-4 text-sm text-neutral-500">
        2 flags â€¢ 4 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/health/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app health</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Monitor the health status of running services with production-grade reliability and observability features.</p>
      <div class="mt-4 text-sm text-neutral-500">
        19 flags â€¢ 9 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/logs/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app logs</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">View logs from running services with filtering and follow support.</p>
      <div class="mt-4 text-sm text-neutral-500">
        11 flags â€¢ 10 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/info/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app info</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Show comprehensive information about running services.</p>
      <div class="mt-4 text-sm text-neutral-500">
        2 flags â€¢ 4 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/mcp/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app mcp</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Model Context Protocol (MCP) server for AI assistant integration. Enables AI assistants like Claude Desktop and GitHub Copilot to interact with your azd app projects.</p>
      <div class="mt-4 text-sm text-neutral-500">
        0 flags â€¢ 3 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/notifications/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app notifications</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">View and manage notifications for service state changes and events.</p>
      <div class="mt-4 text-sm text-neutral-500">
        0 flags â€¢ 10 examples
      </div>
    </a>

    <a href="/azd-app/reference/cli/version/" class="block p-6 bg-white dark:bg-neutral-800 rounded-lg border border-neutral-200 dark:border-neutral-700 hover:border-blue-500 dark:hover:border-blue-500 transition-colors">
      <div class="flex items-start justify-between mb-2">
        <code class="text-lg font-semibold text-blue-600 dark:text-blue-400">azd app version</code>
        <span class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 rounded">Full Docs</span>
      </div>
      <p class="text-neutral-600 dark:text-neutral-400">Show version information for the azd app extension.</p>
      <div class="mt-4 text-sm text-neutral-500">
        0 flags â€¢ 2 examples
      </div>
    </a>
      </div>
    </section>

    <!-- Quick Reference -->
    <section class="mt-12">
      <h2 class="text-2xl font-bold mb-6">Quick Reference</h2>
      <Code code={quickRefCode} lang="bash" frame="terminal" />
    </section>

    <!-- Environment Variables -->
    <section class="mt-12">
      <h2 class="text-2xl font-bold mb-6">Environment Variables</h2>
      <p class="text-neutral-600 dark:text-neutral-400 mb-4">
        When running through <code class="px-2 py-1 bg-neutral-100 dark:bg-neutral-800 rounded">azd app &lt;command&gt;</code>, 
        these Azure environment variables are automatically available:
      </p>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm bg-neutral-50 dark:bg-neutral-800 rounded-lg overflow-hidden">
          <thead>
            <tr class="bg-neutral-100 dark:bg-neutral-900">
              <th class="text-left py-3 px-4 font-semibold text-neutral-900 dark:text-neutral-100">Variable</th>
              <th class="text-left py-3 px-4 font-semibold text-neutral-900 dark:text-neutral-100">Description</th>
            </tr>
          </thead>
          <tbody class="text-neutral-700 dark:text-neutral-300">
            <tr class="border-t border-neutral-200 dark:border-neutral-700">
              <td class="py-3 px-4"><code class="text-blue-600 dark:text-blue-400">AZURE_SUBSCRIPTION_ID</code></td>
              <td class="py-3 px-4">Current Azure subscription</td>
            </tr>
            <tr class="border-t border-neutral-200 dark:border-neutral-700">
              <td class="py-3 px-4"><code class="text-blue-600 dark:text-blue-400">AZURE_RESOURCE_GROUP_NAME</code></td>
              <td class="py-3 px-4">Target resource group</td>
            </tr>
            <tr class="border-t border-neutral-200 dark:border-neutral-700">
              <td class="py-3 px-4"><code class="text-blue-600 dark:text-blue-400">AZURE_ENV_NAME</code></td>
              <td class="py-3 px-4">Environment name</td>
            </tr>
            <tr class="border-t border-neutral-200 dark:border-neutral-700">
              <td class="py-3 px-4"><code class="text-blue-600 dark:text-blue-400">AZURE_LOCATION</code></td>
              <td class="py-3 px-4">Azure region</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- MCP Integration -->
    <section class="mt-12 p-6 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 rounded-lg border border-purple-200 dark:border-purple-800">
      <div class="flex items-start gap-4">
        <span class="text-3xl">ðŸ¤–</span>
        <div>
          <h3 class="text-xl font-bold mb-2">AI-Powered Debugging with MCP</h3>
          <p class="text-neutral-600 dark:text-neutral-400 mb-4">
            The <code class="px-2 py-1 bg-white/50 dark:bg-neutral-800 rounded">azd app mcp</code> command 
            enables AI assistants like GitHub Copilot to interact with your running services.
          </p>
          <a href="/azd-app/mcp/" class="inline-flex items-center gap-2 text-purple-600 dark:text-purple-400 font-medium hover:underline">
            Learn about MCP integration â†’
          </a>
        </div>
      </div>
    </section>
  </div>
</Layout>
