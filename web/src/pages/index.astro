---
/**
 * Landing Page
 * 
 * Primary marketing entry point for azd-app.
 * Showcases the complete local development environment for Azure apps.
 */
import Layout from '../components/Layout.astro';
import FeatureCard from '../components/FeatureCard.astro';
import DashboardCarousel from '../components/DashboardCarousel.astro';
import Terminal from '../components/Terminal.astro';

// Feature data - Lead with core dev experience, AI features later
const features = [
  {
    icon: "‚ö°",
    title: "One-Command Start",
    description: "Run `azd app run` and all services start with dependencies resolved automatically.",
    href: "/azd-app/quick-start/",
  },
  {
    icon: "üìä",
    title: "Real-time Dashboard",
    description: "Monitor all your services in one place with live status updates and health checks.",
    href: "/azd-app/tour/5-dashboard/",
  },
  {
    icon: "üìù",
    title: "Unified Logs",
    description: "Stream and filter logs from all services. Search, highlight, and export with ease.",
    href: "/azd-app/tour/6-logs/",
  },
  {
    icon: "‚ù§Ô∏è",
    title: "Health Monitoring",
    description: "Automatic health checks with visual indicators. Know when services need attention.",
    href: "/azd-app/tour/7-health/",
  },
  {
    icon: "üîß",
    title: "Auto Dependencies",
    description: "Automatically installs packages, creates virtual environments, and resolves requirements.",
    href: "/azd-app/reference/cli/deps/",
  },
  {
    icon: `<svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.164 6.839 9.49.5.09.682-.218.682-.484 0-.237-.009-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .269.18.579.688.481C19.138 20.161 22 16.418 22 12c0-5.523-4.477-10-10-10z"/></svg>`,
    title: "AI-Powered Debugging",
    description: "Connect GitHub Copilot via MCP to analyze logs, diagnose issues, and suggest fixes.",
    badge: "AI",
    href: "/azd-app/mcp/",
  },
];

// Demo terminal lines
const demoLines = [
  { type: 'command' as const, content: 'azd init -t jongio/azd-app-demo' },
  { type: 'output' as const, content: 'Initializing project from template...' },
  { type: 'success' as const, content: '‚úì Project initialized' },
  { type: 'output' as const, content: '' },
  { type: 'command' as const, content: 'azd app run' },
  { type: 'output' as const, content: 'Starting services...' },
  { type: 'success' as const, content: '‚úì web started on http://localhost:3000' },
  { type: 'error' as const, content: '‚úó api: Connection timeout to database' },
  { type: 'output' as const, content: '' },
  { type: 'info' as const, content: 'üí° Ask Copilot: "Why is my API failing?"' },
];

// Demo steps
const demoSteps = [
  { number: 1, title: "Initialize", description: "Clone the demo template" },
  { number: 2, title: "Run", description: "Start all services" },
  { number: 3, title: "Discover", description: "Find the bug in logs" },
  { number: 4, title: "Fix with AI", description: "Ask Copilot for help" },
];
---

<Layout title="Home" variant="landing">
  <!-- Hero Section -->
  <section class="hero" aria-labelledby="hero-heading">
    <div class="hero-container">
      <div class="hero-content">
        <h1 id="hero-heading" class="hero-title">
          Run Azure Apps<br />Locally
        </h1>
        <p class="hero-description">
          azd app extends Azure Developer CLI with a complete local development environment. One command starts all services, manages dependencies, and provides real-time monitoring.
        </p>
        <div class="hero-actions">
          <a href="/azd-app/quick-start/" class="btn-primary">
            Get Started
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
          <a href="#demo" class="btn-secondary">
            View Demo
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
          </a>
        </div>
        <p class="hero-social-proof">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="hero-check-icon">
            <polyline points="20 6 9 17 4 12"></polyline>
          </svg>
          Open source ‚Ä¢ Works with GitHub Copilot
        </p>
      </div>
      <div class="hero-illustration">
        <DashboardCarousel interval={4000} />
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features" aria-labelledby="features-heading">
    <div class="features-container">
      <div class="features-header">
        <h2 id="features-heading" class="features-title">Everything You Need</h2>
        <p class="features-description">for Local Azure Development</p>
      </div>
      <div class="features-grid" role="list">
        {features.map((feature) => (
          <FeatureCard
            icon={feature.icon}
            title={feature.title}
            description={feature.description}
            badge={feature.badge}
            href={feature.href}
          />
        ))}
      </div>
    </div>
  </section>

  <!-- Demo Section -->
  <section id="demo" class="demo" aria-labelledby="demo-heading">
    <div class="demo-container">
      <div class="demo-header">
        <h2 id="demo-heading" class="demo-title">Try It Yourself</h2>
        <p class="demo-description">
          Get started in under 5 minutes with our demo template. It includes an intentional bug for you to fix using AI!
        </p>
      </div>
      
      <div class="demo-terminal-wrapper">
        <Terminal 
          lines={demoLines}
          title="Terminal"
          showDots={true}
          showCopy={true}
        />
      </div>

      <div class="demo-steps">
        {demoSteps.map((step) => (
          <div class="demo-step">
            <div class="demo-step-number">{step.number}</div>
            <div class="demo-step-content">
              <div class="demo-step-title">{step.title}</div>
              <div class="demo-step-description">{step.description}</div>
            </div>
          </div>
        ))}
      </div>

      <div class="demo-cta">
        <a href="/azd-app/quick-start/" class="btn-primary">
          Start Quick Start
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Stats Section -->
  <section class="stats" aria-label="Product statistics">
    <div class="stats-container">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value">10+</div>
          <div class="stat-label">MCP Tools</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">&lt;5min</div>
          <div class="stat-label">Setup Time</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">100%</div>
          <div class="stat-label">Open Source</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">3</div>
          <div class="stat-label">AI Integrations</div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  /* ========================================
     Hero Section
     ======================================== */
  .hero {
    padding: 4rem 1.5rem;
    background: linear-gradient(to bottom, var(--color-bg-accent), var(--color-bg-primary));
  }

  @media (min-width: 768px) {
    .hero {
      padding: 5rem 2rem;
    }
  }

  @media (min-width: 1024px) {
    .hero {
      padding: 6rem 2rem;
    }
  }

  .hero-container {
    max-width: 1280px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 2rem;
    align-items: center;
  }

  @media (min-width: 1024px) {
    .hero-container {
      flex-direction: row;
      gap: 4rem;
      align-items: center;
    }
  }

  .hero-content {
    flex: 1;
    text-align: center;
  }

  @media (min-width: 1024px) {
    .hero-content {
      text-align: left;
    }
  }

  .hero-title {
    font-size: 2.25rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 1.5rem;
    line-height: 1.1;
    letter-spacing: -0.02em;
  }

  @media (min-width: 768px) {
    .hero-title {
      font-size: 3rem;
    }
  }

  @media (min-width: 1024px) {
    .hero-title {
      font-size: 3.75rem;
    }
  }

  .hero-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin-bottom: 2rem;
    line-height: 1.6;
    max-width: 36rem;
    margin-left: auto;
    margin-right: auto;
  }

  @media (min-width: 768px) {
    .hero-description {
      font-size: 1.25rem;
    }
  }

  @media (min-width: 1024px) {
    .hero-description {
      margin-left: 0;
      margin-right: 0;
    }
  }

  .hero-actions {
    display: flex;
    justify-content: center;
    gap: 1rem;
    flex-wrap: wrap;
    margin-bottom: 1.5rem;
  }

  @media (min-width: 1024px) {
    .hero-actions {
      justify-content: flex-start;
    }
  }

  .hero-social-proof {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--color-text-tertiary);
    margin: 0;
  }

  @media (min-width: 1024px) {
    .hero-social-proof {
      justify-content: flex-start;
    }
  }

  .hero-check-icon {
    color: var(--color-success);
  }

  .hero-illustration {
    flex: 1;
    width: 100%;
    max-width: 560px;
    display: flex;
    justify-content: center;
  }

  /* Animation */
  .hero-content {
    animation: hero-content-in 0.6s ease-out;
  }

  .hero-illustration {
    animation: hero-illustration-in 0.8s ease-out 0.2s both;
  }

  @keyframes hero-content-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes hero-illustration-in {
    from {
      opacity: 0;
      transform: translateY(30px) scale(0.98);
    }
    to {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  /* ========================================
     Features Section
     ======================================== */
  .features {
    padding: 5rem 1.5rem;
  }

  @media (min-width: 768px) {
    .features {
      padding: 6rem 2rem;
    }
  }

  .features-container {
    max-width: 1280px;
    margin: 0 auto;
  }

  .features-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .features-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 0.5rem;
  }

  @media (min-width: 768px) {
    .features-title {
      font-size: 2.5rem;
    }
  }

  .features-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin: 0;
  }

  .features-grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: 1fr;
  }

  @media (min-width: 640px) {
    .features-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .features-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* ========================================
     Demo Section
     ======================================== */
  .demo {
    padding: 5rem 1.5rem;
    background: var(--color-bg-secondary);
  }

  @media (min-width: 768px) {
    .demo {
      padding: 6rem 2rem;
    }
  }

  .demo-container {
    max-width: 900px;
    margin: 0 auto;
  }

  .demo-header {
    text-align: center;
    margin-bottom: 2rem;
  }

  .demo-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 0.75rem;
  }

  @media (min-width: 768px) {
    .demo-title {
      font-size: 2.5rem;
    }
  }

  .demo-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin: 0;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .demo-terminal-wrapper {
    margin-bottom: 2rem;
  }

  .demo-terminal-wrapper :global(.terminal) {
    box-shadow: var(--shadow-lg);
  }

  .demo-steps {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
  }

  @media (min-width: 640px) {
    .demo-steps {
      gap: 1rem;
    }
  }

  .demo-step {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.75rem 1rem;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-default);
    border-radius: 0.5rem;
  }

  .demo-step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    background: var(--color-interactive-default);
    color: white;
    font-size: 0.875rem;
    font-weight: 700;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .demo-step-content {
    text-align: left;
  }

  .demo-step-title {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-text-primary);
  }

  .demo-step-description {
    font-size: 0.75rem;
    color: var(--color-text-tertiary);
  }

  .demo-cta {
    text-align: center;
  }

  /* ========================================
     Stats Section
     ======================================== */
  .stats {
    padding: 4rem 1.5rem;
    background: var(--color-bg-secondary);
    border-top: 1px solid var(--color-border-default);
  }

  @media (min-width: 768px) {
    .stats {
      padding: 5rem 2rem;
    }
  }

  .stats-container {
    max-width: 1000px;
    margin: 0 auto;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 2rem;
  }

  @media (min-width: 768px) {
    .stats-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .stat-item {
    text-align: center;
  }

  .stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-interactive-default);
    margin-bottom: 0.25rem;
  }

  @media (min-width: 768px) {
    .stat-value {
      font-size: 2.5rem;
    }
  }

  .stat-label {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    font-weight: 500;
  }

  /* ========================================
     Buttons (Shared)
     ======================================== */
  .btn-primary,
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    font-weight: 600;
    border-radius: 0.5rem;
    text-decoration: none;
    transition: background-color 150ms ease-out, transform 150ms ease-out, box-shadow 150ms ease-out;
  }

  .btn-primary {
    background: var(--color-interactive-default);
    color: white;
  }

  .btn-primary:hover {
    background: var(--color-interactive-hover);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .btn-primary:focus-visible {
    outline: 2px solid var(--color-border-focus);
    outline-offset: 2px;
  }

  .btn-primary:active {
    transform: scale(0.98);
  }

  .btn-secondary {
    background: transparent;
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-strong);
  }

  .btn-secondary:hover {
    background: var(--color-bg-secondary);
    border-color: var(--color-interactive-default);
    color: var(--color-interactive-default);
  }

  .btn-secondary:focus-visible {
    outline: 2px solid var(--color-border-focus);
    outline-offset: 2px;
  }

  .btn-secondary:active {
    transform: scale(0.98);
  }

  /* Mobile touch targets */
  @media (max-width: 640px) {
    .btn-primary,
    .btn-secondary {
      padding: 0.875rem 1.75rem;
      width: 100%;
      justify-content: center;
    }
  }

  /* ========================================
     Reduced Motion
     ======================================== */
  @media (prefers-reduced-motion: reduce) {
    .hero-content,
    .hero-illustration {
      animation: none;
    }

    .btn-primary:hover,
    .btn-secondary:hover {
      transform: none;
    }

    .btn-primary:active,
    .btn-secondary:active {
      transform: none;
    }
  }
</style>
