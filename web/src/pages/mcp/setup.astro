---
/**
 * MCP Setup Guides
 * 
 * Step-by-step setup for GitHub Copilot (primary), Cursor, and Claude Desktop.
 */
import Layout from '../../components/Layout.astro';
import CodeBlock from '../../components/CodeBlock.astro';

const baseUrl = import.meta.env.BASE_URL;

// Setup steps for each client
const copilotSteps = [
  {
    title: "Install VS Code and GitHub Copilot",
    description: "Make sure you have VS Code with the GitHub Copilot extension installed.",
    link: {
      text: "Install GitHub Copilot",
      href: "https://marketplace.visualstudio.com/items?itemName=GitHub.copilot",
    },
  },
  {
    title: "Create MCP configuration",
    description: "Add the MCP configuration file to your project's .vscode folder.",
  },
  {
    title: "Restart VS Code",
    description: "Close and reopen VS Code to load the MCP configuration.",
  },
  {
    title: "Start your services",
    description: "Run `azd app run` to start your services.",
  },
  {
    title: "Open Copilot Chat",
    description: "Use Ctrl+Shift+I (or Cmd+Shift+I on Mac) to open Copilot Chat and start asking questions.",
  },
];
---

<Layout title="MCP Setup" description="Configure MCP with GitHub Copilot, Cursor, and Claude Desktop">
  <main class="setup-page">
    <!-- Header -->
    <header class="setup-header">
      <nav class="setup-breadcrumb" aria-label="Breadcrumb">
        <a href={`${baseUrl}mcp/`}>MCP Server</a>
        <span aria-hidden="true">/</span>
        <span aria-current="page">Setup</span>
      </nav>
      <h1 class="setup-title">Setup Guides</h1>
      <p class="setup-description">
        Configure MCP with your preferred AI assistant. GitHub Copilot is recommended 
        for the best experience.
      </p>
    </header>

    <!-- Client Selection Tabs -->
    <div class="setup-tabs" role="tablist" aria-label="AI Client Setup Guides">
      <button 
        role="tab" 
        aria-selected="true" 
        aria-controls="panel-copilot" 
        id="tab-copilot"
        class="setup-tab setup-tab--active"
        data-tab="copilot"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.164 6.839 9.49.5.09.682-.218.682-.484 0-.237-.009-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.268 2.75 1.026A9.578 9.578 0 0112 6.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.026 2.747-1.026.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .269.18.579.688.481C19.138 20.161 22 16.418 22 12c0-5.523-4.477-10-10-10z"/>
        </svg>
        GitHub Copilot
        <span class="setup-tab-badge">Recommended</span>
      </button>
      <!-- Cursor and Claude Desktop tabs hidden for now - coming soon -->
    </div>

    <!-- GitHub Copilot Panel -->
    <section 
      role="tabpanel" 
      id="panel-copilot" 
      aria-labelledby="tab-copilot"
      class="setup-panel"
      data-panel="copilot"
    >
      <div class="setup-steps">
        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">1</span>
            <h2 class="setup-step-title">Install GitHub Copilot</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Install the GitHub Copilot and GitHub Copilot Chat extensions in VS Code.
            </p>
            <a 
              href="https://marketplace.visualstudio.com/items?itemName=GitHub.copilot" 
              target="_blank" 
              rel="noopener"
              class="setup-link"
            >
              Install from Marketplace
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/>
              </svg>
            </a>
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">2</span>
            <h2 class="setup-step-title">Create MCP Configuration</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Create a <code>.vscode/mcp.json</code> file in your project root:
            </p>
            <CodeBlock 
              code={`{
  "servers": {
    "azd-app": {
      "command": "azd",
      "args": ["app", "mcp", "serve"]
    }
  }
}`}
              language="json"
              filename=".vscode/mcp.json"
              showCopy={true}
            />
            <div class="setup-note">
              <span class="setup-note-icon" aria-hidden="true">üí°</span>
              <p>
                This file tells VS Code how to connect to the azd-app MCP server. 
                The server starts automatically when you open Copilot Chat.
              </p>
            </div>
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">3</span>
            <h2 class="setup-step-title">Restart VS Code</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Close and reopen VS Code to load the new MCP configuration.
            </p>
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">4</span>
            <h2 class="setup-step-title">Start Your Services</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Run your services so Copilot can access their status and logs:
            </p>
            <CodeBlock 
              code="azd app run"
              language="bash"
              showCopy={true}
            />
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">5</span>
            <h2 class="setup-step-title">Open Copilot Chat</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Open GitHub Copilot Chat with <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd> 
              (or <kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>I</kbd> on Mac).
            </p>
            <p>Try asking:</p>
            <div class="setup-prompts">
              <code>"What services are running?"</code>
              <code>"Show me errors from the API service"</code>
              <code>"Why is my database connection failing?"</code>
            </div>
          </div>
        </div>
      </div>

      <div class="setup-verification">
        <h3 class="setup-verification-title">Verify It's Working</h3>
        <p>
          When MCP is working correctly, you'll see Copilot reference your actual 
          service names and show real-time data from your running services.
        </p>
        <div class="setup-verification-checklist">
          <label class="setup-checkbox">
            <input type="checkbox" />
            <span>Copilot shows your service names</span>
          </label>
          <label class="setup-checkbox">
            <input type="checkbox" />
            <span>Copilot can describe service health</span>
          </label>
          <label class="setup-checkbox">
            <input type="checkbox" />
            <span>Copilot can show recent logs</span>
          </label>
        </div>
      </div>
    </section>

    <!-- Cursor Panel - Hidden for now -->
    <section 
      role="tabpanel" 
      id="panel-cursor" 
      aria-labelledby="tab-cursor"
      class="setup-panel"
      data-panel="cursor"
      hidden
      style="display: none;"
    >
      <div class="setup-steps">
        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">1</span>
            <h2 class="setup-step-title">Open Cursor Settings</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Open Cursor Settings ‚Üí Features ‚Üí MCP Servers.
            </p>
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">2</span>
            <h2 class="setup-step-title">Add MCP Server</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Add a new MCP server with the following configuration:
            </p>
            <CodeBlock 
              code={`{
  "azd-app": {
    "command": "azd",
    "args": ["app", "mcp", "serve"]
  }
}`}
              language="json"
              showCopy={true}
            />
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">3</span>
            <h2 class="setup-step-title">Enable the Server</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Toggle the server to enabled and restart Cursor if prompted.
            </p>
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">4</span>
            <h2 class="setup-step-title">Start Your Services</h2>
          </div>
          <div class="setup-step-content">
            <CodeBlock 
              code="azd app run"
              language="bash"
              showCopy={true}
            />
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">5</span>
            <h2 class="setup-step-title">Use Cursor Chat</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Open Cursor's AI chat and ask about your services. The MCP tools 
              will be available automatically.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Claude Desktop Panel - Hidden for now -->
    <section 
      role="tabpanel" 
      id="panel-claude" 
      aria-labelledby="tab-claude"
      class="setup-panel"
      data-panel="claude"
      hidden
      style="display: none;"
    >
      <div class="setup-steps">
        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">1</span>
            <h2 class="setup-step-title">Install Claude Desktop</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Download and install Claude Desktop from Anthropic.
            </p>
            <a 
              href="https://claude.ai/download" 
              target="_blank" 
              rel="noopener"
              class="setup-link"
            >
              Download Claude Desktop
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6M15 3h6v6M10 14L21 3"/>
              </svg>
            </a>
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">2</span>
            <h2 class="setup-step-title">Edit Configuration</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Open Claude Desktop's configuration file:
            </p>
            <div class="setup-paths">
              <div class="setup-path">
                <strong>macOS:</strong>
                <code>~/Library/Application Support/Claude/claude_desktop_config.json</code>
              </div>
              <div class="setup-path">
                <strong>Windows:</strong>
                <code>%APPDATA%\Claude\claude_desktop_config.json</code>
              </div>
            </div>
            <p>Add the MCP server configuration:</p>
            <CodeBlock 
              code={`{
  "mcpServers": {
    "azd-app": {
      "command": "azd",
      "args": ["app", "mcp", "serve"]
    }
  }
}`}
              language="json"
              showCopy={true}
            />
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">3</span>
            <h2 class="setup-step-title">Restart Claude Desktop</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Quit and reopen Claude Desktop to load the new configuration.
            </p>
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">4</span>
            <h2 class="setup-step-title">Start Your Services</h2>
          </div>
          <div class="setup-step-content">
            <CodeBlock 
              code="azd app run"
              language="bash"
              showCopy={true}
            />
          </div>
        </div>

        <div class="setup-step">
          <div class="setup-step-header">
            <span class="setup-step-number">5</span>
            <h2 class="setup-step-title">Chat with Claude</h2>
          </div>
          <div class="setup-step-content">
            <p>
              Start a new conversation and ask Claude about your services. 
              You should see the MCP tools icon indicating available tools.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Troubleshooting -->
    <section class="setup-troubleshooting">
      <h2 class="setup-troubleshooting-title">Troubleshooting</h2>
      <div class="setup-troubleshooting-items">
        <details class="setup-faq">
          <summary>MCP server not connecting</summary>
          <div class="setup-faq-content">
            <p>Make sure:</p>
            <ul>
              <li>azd-app is installed: run <code>azd app --help</code></li>
              <li>The mcp.json file is in the correct location</li>
              <li>You've restarted your editor/application</li>
              <li>Your services are running with <code>azd app run</code></li>
            </ul>
          </div>
        </details>
        <details class="setup-faq">
          <summary>Copilot doesn't show service information</summary>
          <div class="setup-faq-content">
            <p>The MCP server needs running services to report on. Make sure:</p>
            <ul>
              <li>You have an <code>azure.yaml</code> file in your project</li>
              <li>Services are running with <code>azd app run</code></li>
              <li>Try asking: "List the MCP tools available"</li>
            </ul>
          </div>
        </details>
        <details class="setup-faq">
          <summary>Getting permission errors</summary>
          <div class="setup-faq-content">
            <p>On macOS/Linux, you may need to grant terminal access. Check:</p>
            <ul>
              <li>System Preferences ‚Üí Security & Privacy ‚Üí Privacy ‚Üí Developer Tools</li>
              <li>Ensure your editor has permission to run terminal commands</li>
            </ul>
          </div>
        </details>
      </div>
    </section>

    <!-- Next Steps -->
    <section class="setup-next">
      <h2 class="setup-next-title">Next Steps</h2>
      <div class="setup-next-cards">
        <a href={`${baseUrl}mcp/ai-debugging/`} class="setup-next-card">
          <span class="setup-next-card-icon" aria-hidden="true">üîç</span>
          <div class="setup-next-card-content">
            <h3>AI Debugging Guide</h3>
            <p>Learn how to debug issues using AI</p>
          </div>
        </a>
        <a href={`${baseUrl}mcp/prompts/`} class="setup-next-card">
          <span class="setup-next-card-icon" aria-hidden="true">üí¨</span>
          <div class="setup-next-card-content">
            <h3>Prompt Library</h3>
            <p>Copy-paste prompts for common tasks</p>
          </div>
        </a>
        <a href={`${baseUrl}mcp/tools/`} class="setup-next-card">
          <span class="setup-next-card-icon" aria-hidden="true">üîß</span>
          <div class="setup-next-card-content">
            <h3>Tools Reference</h3>
            <p>All 10 MCP tools explained</p>
          </div>
        </a>
      </div>
    </section>
  </main>
</Layout>

<style>
  .setup-page {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 1.5rem 3rem;
  }

  /* Header */
  .setup-header {
    padding: 2rem 0 1.5rem;
    border-bottom: 1px solid var(--color-border-default);
    margin-bottom: 2rem;
  }

  .setup-breadcrumb {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: var(--color-text-tertiary);
    margin-bottom: 1rem;
  }

  .setup-breadcrumb a {
    color: var(--color-text-secondary);
    text-decoration: none;
  }

  .setup-breadcrumb a:hover {
    color: var(--color-interactive-default);
    text-decoration: underline;
  }

  .setup-title {
    font-size: 2rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin: 0 0 0.75rem;
  }

  .setup-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.6;
  }

  /* Tabs */
  .setup-tabs {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
    border-bottom: 1px solid var(--color-border-default);
    padding-bottom: 0;
    overflow-x: auto;
    scrollbar-width: none;
  }

  .setup-tabs::-webkit-scrollbar {
    display: none;
  }

  .setup-tab {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--color-text-secondary);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    cursor: pointer;
    white-space: nowrap;
    transition: color 150ms ease-out, border-color 150ms ease-out;
  }

  .setup-tab:hover {
    color: var(--color-text-primary);
  }

  .setup-tab--active {
    color: var(--color-interactive-default);
    border-bottom-color: var(--color-interactive-default);
  }

  .setup-tab-badge {
    padding: 0.125rem 0.5rem;
    font-size: 0.6875rem;
    font-weight: 600;
    color: var(--color-azure-700);
    background: var(--color-azure-100);
    border-radius: 9999px;
    text-transform: uppercase;
    letter-spacing: 0.03em;
  }

  [data-theme="dark"] .setup-tab-badge {
    color: var(--color-azure-200);
    background: var(--color-azure-900);
  }

  /* Panels */
  .setup-panel {
    animation: panel-in 0.3s ease-out;
  }

  @keyframes panel-in {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Steps */
  .setup-steps {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .setup-step {
    padding-left: 1rem;
    border-left: 2px solid var(--color-border-default);
  }

  .setup-step-header {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
  }

  .setup-step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    background: var(--color-azure-500);
    color: white;
    font-size: 0.875rem;
    font-weight: 700;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .setup-step-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin: 0;
  }

  .setup-step-content {
    padding-left: 2.75rem;
  }

  .setup-step-content p {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    margin: 0 0 1rem;
    line-height: 1.6;
  }

  .setup-step-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.875rem;
  }

  .setup-link {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.9375rem;
    color: var(--color-interactive-default);
    text-decoration: none;
  }

  .setup-link:hover {
    text-decoration: underline;
  }

  .setup-note {
    display: flex;
    gap: 0.75rem;
    padding: 1rem;
    background: var(--color-bg-accent);
    border: 1px solid var(--color-azure-200);
    border-radius: 0.5rem;
    margin-top: 1rem;
  }

  [data-theme="dark"] .setup-note {
    border-color: var(--color-azure-800);
  }

  .setup-note-icon {
    font-size: 1.25rem;
    flex-shrink: 0;
  }

  .setup-note p {
    margin: 0;
    font-size: 0.875rem;
  }

  .setup-prompts {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .setup-prompts code {
    display: block;
    padding: 0.625rem 0.875rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-default);
    border-radius: 0.375rem;
    color: var(--color-text-primary);
    font-size: 0.875rem;
  }

  .setup-paths {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }

  .setup-path {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
  }

  .setup-path code {
    display: block;
    margin-top: 0.25rem;
    padding: 0.5rem;
    background: var(--color-bg-secondary);
    border-radius: 0.25rem;
    font-size: 0.8125rem;
    word-break: break-all;
  }

  /* Verification */
  .setup-verification {
    padding: 1.5rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-default);
    border-radius: 0.75rem;
    margin-bottom: 2rem;
  }

  .setup-verification-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin: 0 0 0.75rem;
  }

  .setup-verification p {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    margin: 0 0 1rem;
  }

  .setup-verification-checklist {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .setup-checkbox {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    cursor: pointer;
  }

  .setup-checkbox input {
    width: 1.125rem;
    height: 1.125rem;
    accent-color: var(--color-success);
  }

  /* Troubleshooting */
  .setup-troubleshooting {
    padding: 2rem 0;
    border-top: 1px solid var(--color-border-default);
    margin-top: 2rem;
  }

  .setup-troubleshooting-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin: 0 0 1.5rem;
  }

  .setup-troubleshooting-items {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .setup-faq {
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-default);
    border-radius: 0.5rem;
  }

  .setup-faq summary {
    padding: 1rem;
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--color-text-primary);
    cursor: pointer;
    list-style: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .setup-faq summary::after {
    content: '+';
    font-size: 1.25rem;
    color: var(--color-text-tertiary);
  }

  .setup-faq[open] summary::after {
    content: '‚àí';
  }

  .setup-faq-content {
    padding: 0 1rem 1rem;
    font-size: 0.875rem;
    color: var(--color-text-secondary);
  }

  .setup-faq-content p {
    margin: 0 0 0.5rem;
  }

  .setup-faq-content ul {
    margin: 0;
    padding-left: 1.25rem;
  }

  .setup-faq-content li {
    margin: 0.25rem 0;
  }

  .setup-faq-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
  }

  /* Next Steps */
  .setup-next {
    padding-top: 2rem;
    border-top: 1px solid var(--color-border-default);
    margin-top: 2rem;
  }

  .setup-next-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin: 0 0 1.5rem;
  }

  .setup-next-cards {
    display: grid;
    gap: 1rem;
    grid-template-columns: 1fr;
  }

  @media (min-width: 640px) {
    .setup-next-cards {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .setup-next-card {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1.25rem;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-default);
    border-radius: 0.75rem;
    text-decoration: none;
    transition: border-color 150ms ease-out, transform 150ms ease-out;
  }

  .setup-next-card:hover {
    border-color: var(--color-azure-300);
    transform: translateY(-2px);
  }

  .setup-next-card-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .setup-next-card-content h3 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-primary);
    margin: 0 0 0.25rem;
  }

  .setup-next-card-content p {
    font-size: 0.8125rem;
    color: var(--color-text-secondary);
    margin: 0;
  }

  @media (prefers-reduced-motion: reduce) {
    .setup-panel {
      animation: none;
    }

    .setup-next-card:hover {
      transform: none;
    }
  }
</style>

<script>
  function initSetupTabs(): void {
    const tabs = document.querySelectorAll<HTMLButtonElement>('[role="tab"]');
    const panels = document.querySelectorAll<HTMLElement>('[role="tabpanel"]');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const targetPanel = tab.getAttribute('data-tab');
        
        // Update tabs
        tabs.forEach(t => {
          t.setAttribute('aria-selected', 'false');
          t.classList.remove('setup-tab--active');
          t.setAttribute('tabindex', '-1');
        });
        tab.setAttribute('aria-selected', 'true');
        tab.classList.add('setup-tab--active');
        tab.setAttribute('tabindex', '0');

        // Update panels
        panels.forEach(panel => {
          if (panel.getAttribute('data-panel') === targetPanel) {
            panel.removeAttribute('hidden');
          } else {
            panel.setAttribute('hidden', '');
          }
        });
      });

      // Keyboard navigation
      tab.addEventListener('keydown', (e) => {
        const tabList = Array.from(tabs);
        const index = tabList.indexOf(tab);
        
        if (e.key === 'ArrowRight') {
          e.preventDefault();
          const nextTab = tabList[(index + 1) % tabList.length];
          nextTab.click();
          nextTab.focus();
        } else if (e.key === 'ArrowLeft') {
          e.preventDefault();
          const prevTab = tabList[(index - 1 + tabList.length) % tabList.length];
          prevTab.click();
          prevTab.focus();
        }
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSetupTabs);
  } else {
    initSetupTabs();
  }

  document.addEventListener('astro:after-swap', initSetupTabs);
</script>
